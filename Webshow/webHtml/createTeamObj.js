var creatTeamObj =
{
    html: `<div style="width:10000px;overflow:hidden;">
            <img src="bg/t2.jpg" />
            <img src="bg/t3.jpg" />
            <img src="bg/t4.jpg" />
            <img src="bg/t5.png" />
            <img src="bg/t3.jpg" />
            <img src="bg/t4.jpg" />
            <img src="bg/t2.jpg" />
            <img src="bg/t3.jpg" />
            <img src="bg/t4.jpg" />
        </div>
        <div style="width:calc(100% + 100px);">
            <img src="Pic/driverimage/105.jpg" />
            <img src="Pic/driverimage/106.jpg" />
            <img src="Pic/driverimage/107.jpg" />
            <img src="Pic/driverimage/108.jpg" />
            <img src="Pic/driverimage/109.jpg" />
            <img src="Pic/driverimage/110.jpg" />
            <img src="Pic/driverimage/111.jpg" />
            <img src="Pic/driverimage/112.jpg" />
            <img src="Pic/driverimage/113.jpg" />
            <img src="Pic/driverimage/114.jpg" />
            <img src="Pic/driverimage/115.jpg" />
            <img src="Pic/driverimage/116.jpg" />
            <img src="Pic/driverimage/117.jpg" />
            <img src="Pic/driverimage/118.jpg" />
            <img src="Pic/driverimage/119.jpg" />
            <img src="Pic/driverimage/120.jpg" />
            <img src="Pic/driverimage/121.jpg" />
            <img src="Pic/driverimage/123.jpg" />
            <img src="Pic/driverimage/124.jpg" />
            <img src="Pic/driverimage/125.jpg" />
            <img src="Pic/driverimage/126.jpg" />
            <img src="Pic/driverimage/127.jpg" />
            <img src="Pic/driverimage/128.jpg" />
            <img src="Pic/driverimage/129.jpg" />
            <img src="Pic/driverimage/130.jpg" />
            <img src="Pic/driverimage/131.jpg" />
            <img src="Pic/driverimage/132.jpg" />
            <img src="Pic/driverimage/133.jpg" />
            <img src="Pic/driverimage/134.jpg" />
            <img src="Pic/driverimage/135.jpg" />
            <img src="Pic/driverimage/136.jpg" />
            <img src="Pic/driverimage/137.jpg" />
            <img src="Pic/driverimage/139.jpg" />
            <img src="Pic/driverimage/140.jpg" />
            <img src="Pic/driverimage/141.jpg" />
            <img src="Pic/driverimage/142.jpg" />
            <img src="Pic/driverimage/144.jpg" />
            <img src="Pic/driverimage/146.jpg" />
            <img src="Pic/driverimage/148.jpg" />
            <img src="Pic/driverimage/149.jpg" />
            <img src="Pic/driverimage/150.jpg" />
            <img src="Pic/driverimage/152.jpg" />
            <img src="Pic/driverimage/153.jpg" />
            <img src="Pic/driverimage/154.jpg" />
            <img src="Pic/driverimage/155.jpg" />
            <img src="Pic/driverimage/156.jpg" />
            <img src="Pic/driverimage/157.jpg" />
            <img src="Pic/driverimage/162.jpg" />
            <img src="Pic/driverimage/163.jpg" />
            <img src="Pic/driverimage/166.jpg" />
            <img src="Pic/driverimage/167.jpg" />
            <img src="Pic/driverimage/168.jpg" />
            <img src="Pic/driverimage/169.jpg" />
            <img src="Pic/driverimage/170.jpg" />
            <img src="Pic/driverimage/171.jpg" />
            <img src="Pic/driverimage/173.jpg" />
            <img src="Pic/driverimage/174.jpg" />
            <img src="Pic/driverimage/175.jpg" />
            <img src="Pic/driverimage/176.jpg" />
            <img src="Pic/driverimage/177.jpg" />
            <img src="Pic/driverimage/178.jpg" />
            <img src="Pic/driverimage/179.jpg" />
            <img src="Pic/driverimage/180.jpg" />
            <img src="Pic/driverimage/180.jpg" />
            <img src="Pic/driverimage/182.jpg" />
            <img src="Pic/driverimage/183.jpg" />
            <img src="Pic/driverimage/184.jpg" />
            <img src="Pic/driverimage/186.jpg" />
            <img src="Pic/driverimage/187.jpg" />
            <img src="Pic/driverimage/189.jpg" />
            <img src="Pic/driverimage/190.jpg" />
            <img src="Pic/driverimage/191.jpg" />
            <img src="Pic/driverimage/192.jpg" />
            <img src="Pic/driverimage/193.jpg" />
            <img src="Pic/driverimage/194.jpg" />
            <img src="Pic/driverimage/195.jpg" />
        </div>
        <div style="width:100%;height:100%;position:absolute;left:0px;top:0px;background-color:#2e418aa0;color:white;">
            <div style="font-size:2em;">
                <div style="writing-mode:vertical-rl;position:absolute;left:2px;top:3em;">快乐游戏</div>
                <div style="writing-mode: vertical-lr; position: absolute; right: 2px; top: 4em; ">阳光生活</div>
            </div>

        </div>
        <div>
            <img src="bg/t1.png" style="max-width:22em;min-width:3em; width: min(calc(100% - 18em - 2px),calc(61.8%)); bottom: 2px; position: absolute;" />
        </div>

        <div style="width:18em;max-width:18em;height:calc(100% - 3em);left:calc(50% - 9em);top:2em;right:2px;position: absolute;overflow-y:scroll;box-shadow:3px 3px #00000050 inset;">
            <div id="teamLeaderCreatePanel" style="text-align: center; background-color: #ffffff8b;"> 
            </div>
            <div style="text-align:center;width:100%;">
                <button id="BtnToStartGameWhenOrganize" style="width: 5em;
        height: 3em;
        margin-top: 1em;position:center;">
                    开始
                </button>
            </div>
            <div style="text-align:center;width:100%;">
                <button id="BtnToDismissWhenOrganize" style="width: 5em;
        height: 3em;
        margin-top: 1em;position:center;">
                    解散
                </button>
            </div>
        </div>`,
    createMain: function (teamCreateFinish) {
        document.getElementById('rootContainer').innerHTML = '';
        var that = creatTeamObj;
        {
            var operateContent = `<div id="teamLeaderCreatePanel" style="text-align: center; background-color: #ffffff8b;"> 
            </div>
            <div style="text-align:center;width:100%;">
                <button id="BtnToStartGameWhenOrganize" style="width: 5em;
        height: 3em;
        margin-top: 1em;position:center;">
                    开始
                </button>
            </div>
            <div style="text-align:center;width:100%;">
                <button id="BtnToDismissWhenOrganize" style="width: 5em;
        height: 3em;
        margin-top: 1em;position:center;">
                    解散
                </button>
            </div>`;
            // var obj = new DOMParser().parseFromString(that.html, 'text/html');
            var frag = document.createRange().createContextualFragment(that.htm1Join(operateContent));
            // frag.id = that.operateID;
            document.getElementById('rootContainer').appendChild(frag);

            var div1 = document.getElementById('teamLeaderCreatePanel');
            div1.appendChild(that.addDiv('房间号：', teamCreateFinish.TeamNum));
            div1.appendChild(that.addDiv(teamCreateFinish.PlayerDetail.Description + '：', teamCreateFinish.PlayerDetail.Name, true));
        }
        {
            var button_Exit = document.getElementById("BtnToDismissWhenOrganize");
            var button_Start = document.getElementById("BtnToStartGameWhenOrganize");

            button_Exit.innerText = '解散';
            button_Exit.style.width = "5em";
            button_Exit.style.height = "3em";
            button_Exit.style.marginTop = "5em";
            button_Exit.style.backgroundColor = "orange";
            button_Exit.onclick = function () {
                objMain.ws.send(token.CommandStart + 'exit');
                button_Start.onclick = function () { };
                button_Exit.onclick = function () { };
            };

            button_Start.style.width = "5em";
            button_Start.style.height = "3em";
            button_Start.style.marginTop = "1em";
            button_Start.onclick = function () {
                objMain.ws.send(token.CommandStart);
                // this.onclick = function () { };
                button_Start.onclick = function () { };
                button_Exit.onclick = function () { };
            };
        }
    },
    addDiv: function (title, content, isSelf) {
        var div = document.createElement('div');
        var label = document.createElement('label');
        var b = document.createElement('b');
        label.innerText = title;
        b.innerText = content;
        div.appendChild(label);
        div.appendChild(b);
        if (isSelf) {
            div.style.background = 'green';
            div.style.color = 'yellow';
        }
        return div;
    },
    htm1Join: function (insertContent) {
        //  var insert=''; 
        return `<div style="width:10000px;overflow:hidden;">
            <img src="bg/t2.jpg" />
            <img src="bg/t3.jpg" />
            <img src="bg/t4.jpg" />
            <img src="bg/t5.png" />
            <img src="bg/t3.jpg" />
            <img src="bg/t4.jpg" />
            <img src="bg/t2.jpg" />
            <img src="bg/t3.jpg" />
            <img src="bg/t4.jpg" />
        </div>
        <div style="width:calc(100% + 100px);">
            <img src="Pic/driverimage/105.jpg" />
            <img src="Pic/driverimage/106.jpg" />
            <img src="Pic/driverimage/107.jpg" />
            <img src="Pic/driverimage/108.jpg" />
            <img src="Pic/driverimage/109.jpg" />
            <img src="Pic/driverimage/110.jpg" />
            <img src="Pic/driverimage/111.jpg" />
            <img src="Pic/driverimage/112.jpg" />
            <img src="Pic/driverimage/113.jpg" />
            <img src="Pic/driverimage/114.jpg" />
            <img src="Pic/driverimage/115.jpg" />
            <img src="Pic/driverimage/116.jpg" />
            <img src="Pic/driverimage/117.jpg" />
            <img src="Pic/driverimage/118.jpg" />
            <img src="Pic/driverimage/119.jpg" />
            <img src="Pic/driverimage/120.jpg" />
            <img src="Pic/driverimage/121.jpg" />
            <img src="Pic/driverimage/123.jpg" />
            <img src="Pic/driverimage/124.jpg" />
            <img src="Pic/driverimage/125.jpg" />
            <img src="Pic/driverimage/126.jpg" />
            <img src="Pic/driverimage/127.jpg" />
            <img src="Pic/driverimage/128.jpg" />
            <img src="Pic/driverimage/129.jpg" />
            <img src="Pic/driverimage/130.jpg" />
            <img src="Pic/driverimage/131.jpg" />
            <img src="Pic/driverimage/132.jpg" />
            <img src="Pic/driverimage/133.jpg" />
            <img src="Pic/driverimage/134.jpg" />
            <img src="Pic/driverimage/135.jpg" />
            <img src="Pic/driverimage/136.jpg" />
            <img src="Pic/driverimage/137.jpg" />
            <img src="Pic/driverimage/139.jpg" />
            <img src="Pic/driverimage/140.jpg" />
            <img src="Pic/driverimage/141.jpg" />
            <img src="Pic/driverimage/142.jpg" />
            <img src="Pic/driverimage/144.jpg" />
            <img src="Pic/driverimage/146.jpg" />
            <img src="Pic/driverimage/148.jpg" />
            <img src="Pic/driverimage/149.jpg" />
            <img src="Pic/driverimage/150.jpg" />
            <img src="Pic/driverimage/152.jpg" />
            <img src="Pic/driverimage/153.jpg" />
            <img src="Pic/driverimage/154.jpg" />
            <img src="Pic/driverimage/155.jpg" />
            <img src="Pic/driverimage/156.jpg" />
            <img src="Pic/driverimage/157.jpg" />
            <img src="Pic/driverimage/162.jpg" />
            <img src="Pic/driverimage/163.jpg" />
            <img src="Pic/driverimage/166.jpg" />
            <img src="Pic/driverimage/167.jpg" />
            <img src="Pic/driverimage/168.jpg" />
            <img src="Pic/driverimage/169.jpg" />
            <img src="Pic/driverimage/170.jpg" />
            <img src="Pic/driverimage/171.jpg" />
            <img src="Pic/driverimage/173.jpg" />
            <img src="Pic/driverimage/174.jpg" />
            <img src="Pic/driverimage/175.jpg" />
            <img src="Pic/driverimage/176.jpg" />
            <img src="Pic/driverimage/177.jpg" />
            <img src="Pic/driverimage/178.jpg" />
            <img src="Pic/driverimage/179.jpg" />
            <img src="Pic/driverimage/180.jpg" />
            <img src="Pic/driverimage/180.jpg" />
            <img src="Pic/driverimage/182.jpg" />
            <img src="Pic/driverimage/183.jpg" />
            <img src="Pic/driverimage/184.jpg" />
            <img src="Pic/driverimage/186.jpg" />
            <img src="Pic/driverimage/187.jpg" />
            <img src="Pic/driverimage/189.jpg" />
            <img src="Pic/driverimage/190.jpg" />
            <img src="Pic/driverimage/191.jpg" />
            <img src="Pic/driverimage/192.jpg" />
            <img src="Pic/driverimage/193.jpg" />
            <img src="Pic/driverimage/194.jpg" />
            <img src="Pic/driverimage/195.jpg" />
        </div>
        <div style="width:100%;height:100%;position:absolute;left:0px;top:0px;background-color:#2e418aa0;color:white;">
            <div style="font-size:2em;">
                <div style="writing-mode:vertical-rl;position:absolute;left:2px;top:3em;">快乐游戏</div>
                <div style="writing-mode: vertical-lr; position: absolute; right: 2px; top: 4em; ">阳光生活</div>
            </div>

        </div>
        <div>
            <img src="bg/t1.png" style="max-width:22em;min-width:3em; width: min(calc(100% - 18em - 2px),calc(61.8%)); bottom: 2px; position: absolute;" />
        </div> 
        <div style="width: 18em; max-width: 18em; height: calc(100% - 3em); left: calc(50% - 9em); top: 2em; right: 2px; position: absolute;box-shadow:3px 3px #00000050 inset;">
             ${insertContent}
        </div>`},
    join: function () {
        document.getElementById('rootContainer').innerHTML = '';
        var that = creatTeamObj;
        {
            var operateContent = `<div style="text-align:center;margin-top:2em;background-color:#ffffff94;padding:1em 2px 1em 2px;">
                <label>房间号：</label><input id="roomNumInput" type="number" />
            </div>
            <div style="text-align:center;">
                <button id="btnJoinTeam" style="width: 5em;
        height: 3em;
        margin-top: 1em;">
                    加入
                </button>
            </div>
            <div style="text-align:center;">
                <button id="btnJoinBackToMain" style="width: 5em;
        height: 3em;
        margin-top: 1em;background-color:orange;">
                    取消
                </button>
            </div>`;
            // var obj = new DOMParser().parseFromString(that.html, 'text/html');
            var frag = document.createRange().createContextualFragment(that.htm1Join(operateContent));
            // frag.id = that.operateID;
            document.getElementById('rootContainer').appendChild(frag);

            //var div1 = document.getElementById('teamLeaderCreatePanel');
            //div1.appendChild(that.addDiv('房间号：', teamCreateFinish.TeamNum));
            //div1.appendChild(that.addDiv(teamCreateFinish.PlayerDetail.Description + '：', teamCreateFinish.PlayerDetail.Name, true));
        }
        {
            var btnJoinTeam = document.getElementById("btnJoinTeam");
            var btnJoinBackToMain = document.getElementById("btnJoinBackToMain");
            btnJoinTeam.innerText = '加入';
            btnJoinTeam.style.width = "5em";
            btnJoinTeam.style.height = "3em";
            btnJoinTeam.style.marginTop = "1em";
            btnJoinTeam.onclick = function () {
                var roomNumInput = document.getElementById('roomNumInput').value;
                if (roomNumInput == '') {
                    alert('不要输入空');
                }
                else {
                    objMain.ws.send(roomNumInput);
                    btnJoinTeam.onclick = function () { };
                    btnJoinBackToMain.onclick = function () { };
                }
            };

            var btnJoinBackToMain = document.getElementById("btnJoinBackToMain");
            btnJoinBackToMain.innerText = '离开';
            btnJoinBackToMain.style.width = "5em";
            btnJoinBackToMain.style.height = "3em";
            btnJoinBackToMain.style.marginTop = "1em";
            btnJoinBackToMain.style.backgroundColor = "orange";
            btnJoinBackToMain.onclick = function () {
                {
                    objMain.ws.send('-1');
                    btnJoinTeam.onclick = function () { };
                    btnJoinBackToMain.onclick = function () { };
                }
            };
        }
    },
    broadTeamJoin: function (teamJoinBroadInfo) {
        var addDiv = function (title, content, id) {
            var div = document.createElement('div');
            var label = document.createElement('label');
            var b = document.createElement('b');
            label.innerText = title;
            b.innerText = content;
            div.appendChild(label);
            div.appendChild(b);
            if (id != undefined && id != null && id != '')
                div.id = id;
            return div;
        }
        var div1 = document.getElementById('teamLeaderCreatePanel');
        var div2 = document.getElementById('panelToShowTeamDetai');
        if (div1 != null && div1 != undefined) {
            div1.appendChild(addDiv(teamJoinBroadInfo.Player.Description + '：', teamJoinBroadInfo.Player.Name, teamJoinBroadInfo.Player.GUID));
        }
        else (div2 != null && div2 != undefined)
        {
            div2.appendChild(addDiv(teamJoinBroadInfo.Player.Description + '：', teamJoinBroadInfo.Player.Name, teamJoinBroadInfo.Player.GUID));
        }
    },
    joinTeamDetail: function (teamJoinFinish) {
        document.getElementById('rootContainer').innerHTML = '';
        var that = creatTeamObj;
        {
            var operateContent = `<div id="panelToShowTeamDetai" style="text-align:center;margin-top:2em;background-color:#ffffff94;padding:1em 2px 1em 2px;">
               
            </div>
            <div style="text-align:center;">
                <button id="btnLeaveTeamAndRoom" style="width: 5em;
        height: 3em;
        margin-top: 1em;">
                    离开房间
                </button>
            </div>`;
            var frag = document.createRange().createContextualFragment(that.htm1Join(operateContent));
            document.getElementById('rootContainer').appendChild(frag);
        }
        {
            var addDiv = function (title, content, id, isSelf) {
                var div = document.createElement('div');
                var label = document.createElement('label');
                var b = document.createElement('b');
                label.innerText = title;
                b.innerText = content;
                div.appendChild(label);
                div.appendChild(b);
                if (id != undefined && id != null && id != '') div.id = id;
                if (isSelf) {
                    div.style.background = 'green';
                    div.style.color = 'yellow';
                }
                return div;
            }
            var div1 = document.getElementById('panelToShowTeamDetai');
            div1.appendChild(addDiv('房间号：', teamJoinFinish.TeamNum));
            div1.appendChild(addDiv(teamJoinFinish.Players[0].Description + '：', teamJoinFinish.Players[0].Name, teamJoinFinish.Players[0].GUID));

            for (var i = 1; i < teamJoinFinish.Players.length; i++) {
                div1.appendChild(
                    addDiv(
                        teamJoinFinish.Players[i].Description + '：',
                        teamJoinFinish.Players[i].Name,
                        teamJoinFinish.Players[i].GUID,
                        teamJoinFinish.Players[i].IsSelf));
            }
        }
        {
            var button = document.getElementById("btnLeaveTeamAndRoom");
            button.innerText = '离开房间';
            button.style.width = "5em";
            button.style.height = "3em";
            button.style.marginTop = "5em";
            button.style.backgroundColor = "orange";
            button.onclick = function () {
                objMain.ws.send(JSON.stringify({ c: 'LeaveTeam' }));
            };
        }
    },
    clearJoinBtn: function () {
        var button = document.getElementById("btnLeaveTeamAndRoom");
        if (button != null && button != undefined) {
            button.remove();
        }
    }
};